- content_for :breadcrumbs do
  %li.current= link_to 'Manage Surveys', surveyable_surveys_path
  %li.leader
    = link_to new_surveyable_survey_path do
      %i.icon-plus
      New Survey

- if @surveys.any?
  %table.table.table-striped.tablesorter
    %thead
      %tr
        %th Name
        %th Enabled
        %th # of questions
        %th # of invitations
        %th # of responses
        %th
    %tbody
      - @surveys.each do |survey|
        %tr
          %td= link_to survey.title, surveyable_survey_path(survey)
          %td
            - if survey.enabled === true
              .icon-checkmark.icon-only= "&#x2713;".html_safe

          %td= survey.questions.count
          %td= survey.responses.count
          %td
            - if survey.responses.completed.any?
              .survey-completed-count.icon-info
                = survey.responses.completed.count

                %ul.survey-completed-details
                  - survey.responses.completed.each do |response|
                    %li.completed-survey-response
                      %strong.survey-respondable= response.respondable.to_s
                      = '/'
                      %span.survey-respondent= response.respondent.to_s

            - else
              = survey.responses.completed.count

          %td
            = link_to 'Reports', surveyable_survey_path(survey), class: 'btn'
            = link_to('Edit', edit_surveyable_survey_path(survey), class: 'btn') unless survey.has_been_answered?
            = link_to 'Delete', surveyable_survey_path(survey), method: :delete, confirm: 'Are you sure you want to delete this survey?', class: 'btn btn-danger'

- else
  %p.empty No surveys have been created yet.
